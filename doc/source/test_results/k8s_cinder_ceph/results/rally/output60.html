<!doctype html>
<html ng-app="App">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="generator" content="Rally version 0.7.1~dev176">
  <title>Rally | Rally Task Report</title>
  
  
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/nvd3/1.1.15-beta/nv.d3.min.css">
  <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/angularjs/1.3.3/angular.min.js"></script>
  <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.4.13/d3.min.js"></script>
  <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/nvd3/1.1.15-beta/nv.d3.min.js"></script>
  

  <script type="text/javascript">
    "use strict";
    var widgetDirective = function($compile) {
  var Chart = {
    _render: function(node, data, chart, do_after){
      nv.addGraph(function() {
        d3.select(node)
          .datum(data).transition().duration(0)
          .call(chart);
        if (typeof do_after === "function") {
          do_after(node, chart)
        }
        nv.utils.windowResize(chart.update);
      })
    },
    _widgets: {
      Pie: "pie",
      StackedArea: "stack",
      Lines: "lines",
      Histogram: "histogram"
    },
    get_chart: function(widget) {
      if (widget in this._widgets) {
        var name = this._widgets[widget];
        return Chart[name]
      }
      return function() { console.log("Error: unexpected widget:", widget) }
    },
    pie: function(node, data, opts, do_after) {
      var chart = nv.models.pieChart()
        .x(function(d) { return d.key })
        .y(function(d) { return d.values })
        .showLabels(true)
        .labelType("percent")
        .donut(true)
        .donutRatio(0.25)
        .donutLabelsOutside(true)
        .color(function(d){
          if (d.data && d.data.color) { return d.data.color }
        });
      var colorizer = new Chart.colorizer("errors"), data_ = [];
      for (var i in data) {
        data_.push({key:data[i][0], values:data[i][1], color:colorizer.get_color(data[i][0])})
      }
      Chart._render(node, data_, chart)
    },
    colorizer: function(failure_key, failure_color) {
      this.failure_key = failure_key || "failed_duration";
      this.failure_color = failure_color || "#d62728";  // red
      this.color_idx = -1;
      /* NOTE(amaretskiy): this is actually a result of
         d3.scale.category20().range(), excluding red color (#d62728)
         which is reserved for errors */
      this.colors = ["#1f77b4", "#aec7e8", "#ff7f0e", "#ffbb78", "#2ca02c",
                     "#98df8a", "#ff9896", "#9467bd", "#c5b0d5", "#8c564b",
                     "#c49c94", "#e377c2", "#f7b6d2", "#7f7f7f", "#c7c7c7",
                     "#bcbd22", "#dbdb8d", "#17becf", "#9edae5"];
      this.get_color = function(key) {
        if (key === this.failure_key) {
          return this.failure_color
        }
        if (this.color_idx > (this.colors.length - 2)) {
          this.color_idx = 0
        } else {
          this.color_idx++
        }
        return this.colors[this.color_idx]
      }
    },
    stack: function(node, data, opts, do_after) {
      var chart = nv.models.stackedAreaChart()
        .x(function(d) { return d[0] })
        .y(function(d) { return d[1] })
        .useInteractiveGuideline(opts.guide)
        .showControls(opts.controls)
        .clipEdge(true);
      chart.xAxis
        .axisLabel(opts.xname)
        .tickFormat(opts.xformat)
        .showMaxMin(opts.showmaxmin);
      chart.yAxis
        .orient("left")
        .tickFormat(d3.format(opts.yformat || ",.3f"));
      var colorizer = new Chart.colorizer(), data_ = [];
      for (var i in data) {
        data_.push({key:data[i][0], values:data[i][1], color:colorizer.get_color(data[i][0])})
      }
      Chart._render(node, data_, chart, do_after);
    },
    lines: function(node, data, opts, do_after) {
      var chart = nv.models.lineChart()
        .x(function(d) { return d[0] })
        .y(function(d) { return d[1] })
        .useInteractiveGuideline(opts.guide)
        .clipEdge(true);
      chart.xAxis
        .axisLabel(opts.xname)
        .tickFormat(opts.xformat)
        .rotateLabels(opts.xrotate)
        .showMaxMin(opts.showmaxmin);
      chart.yAxis
        .orient("left")
        .tickFormat(d3.format(opts.yformat || ",.3f"));
      var colorizer = new Chart.colorizer(), data_ = [];
      for (var i in data) {
        data_.push({key:data[i][0], values:data[i][1], color:colorizer.get_color(data[i][0])})
      }
      Chart._render(node, data_, chart, do_after)
    },
    histogram: function(node, data, opts) {
      var chart = nv.models.multiBarChart()
        .reduceXTicks(true)
        .showControls(false)
        .transitionDuration(0)
        .groupSpacing(0.05);
      chart
        .legend.radioButtonMode(true);
      chart.xAxis
        .axisLabel("Duration (seconds)")
        .tickFormat(d3.format(",.2f"));
      chart.yAxis
        .axisLabel("Iterations (frequency)")
        .tickFormat(d3.format("d"));
      Chart._render(node, data, chart)
    }
  };

  return {
    restrict: "A",
    scope: { data: "=" },
    link: function(scope, element, attrs) {
      scope.$watch("data", function(data) {
        if (! data) { return console.log("Chart has no data to render!") }
        if (attrs.widget === "Table") {
          var ng_class = attrs.lastrowClass ? " ng-class='{"+attrs.lastrowClass+":$last}'" : "";
          var template = "<table class='striped'><thead>" +
            "<tr><th ng-repeat='i in data.cols track by $index'>{{i}}<tr>" +
            "</thead><tbody>" +
            "<tr" + ng_class + " ng-repeat='row in data.rows track by $index'>" +
            "<td ng-repeat='i in row track by $index'>{{i}}" +
            "<tr>" +
            "</tbody></table>";
          var el = element.empty().append($compile(template)(scope)).children()[0]
        } else if (attrs.widget === "TextArea") {
          var template = "<div style='padding:0 0 5px' ng-repeat='str in data track by $index'>{{str}}</div><div style='height:10px'></div>";
          var el = element.empty().append($compile(template)(scope)).children()[0]
        } else {

          var el_chart = element.addClass("chart").css({display:"block"});
          var el = el_chart.html("<svg></svg>").children()[0];

          var do_after = null;

          if (attrs.widget in {StackedArea:0, Lines:0}) {

            /* Hide widget if not enough data */
            if ((! data.length) || (data[0].length < 1) || (data[0][1].length < 2)) {
              return element.empty().css({display:"none"})
            }

            /* NOTE(amaretskiy): Dirty fix for changing chart width in case
               if there are too long Y values that overlaps chart box. */
            var do_after = function(node, chart){
              var g_box = angular.element(el_chart[0].querySelector(".nv-y.nv-axis"));

              if (g_box && g_box[0] && g_box[0].getBBox) {

                try {
                  // 30 is padding aroung graphs
                  var width = g_box[0].getBBox().width + 30;
                } catch (err) {
                  // This happens sometimes, just skip silently
                  return
                }

                // 890 is chart width (set by CSS)
                if (typeof width === "number" && width > 890) {
                  width = (890 * 2) - width;
                  if (width > 0) {
                    angular.element(node).css({width:width+"px"});
                    chart.update()
                  }
                }
              }
            }
          }
          else if (attrs.widget === "Pie") {
            if (! data.length) {
              return element.empty().css({display:"none"})
            }
          }

          var opts = {
            xname: attrs.nameX || "",
            xrotate: attrs.rotateX || 0,
            yformat: attrs.formatY || ",.3f",
            controls: attrs.controls === "true",
            guide: attrs.guide === "true",
            showmaxmin: attrs.showmaxmin === "true"
          };
          if (attrs.formatDateX) {
            opts.xformat = function(d) { return d3.time.format(attrs.formatDateX)(new Date(d)) }
          } else {
            opts.xformat = d3.format(attrs.formatX || "d")
          }
          Chart.get_chart(attrs.widget)(el, data, opts, do_after);
        }

        if (attrs.nameY) {
          /* NOTE(amaretskiy): Dirty fix for displaying Y-axis label correctly.
             I believe sometimes NVD3 will allow doing this in normal way */
          var label_y = angular.element("<div>").addClass("chart-label-y").text(attrs.nameY);
          angular.element(el).parent().prepend(label_y)
        }

        if (attrs.description) {
          var desc_el = angular.element("<div>").addClass(attrs.descriptionClass || "h3").text(attrs.description);
          angular.element(el).parent().prepend(desc_el)
        }

        if (attrs.title) {
          var title_el = angular.element("<div>").addClass(attrs.titleClass || "h2").text(attrs.title);
          angular.element(el).parent().prepend(title_el)
        }

        angular.element(el).parent().append(angular.element("<div style='clear:both'>"))
      });
    }
  }
};

    var controllerFunction = function($scope, $location) {
        $scope.source = "{\n  \"CinderVolumes.create_and_attach_volume\": [\n    {\n      \"args\": {\n        \"flavor\": {\n          \"name\": \"m1.tiny\"\n        }, \n        \"image\": {\n          \"name\": \"cirros_vm\"\n        }, \n        \"size\": 10\n      }, \n      \"context\": {\n        \"api_versions\": {\n          \"cinder\": {\n            \"service_type\": \"volumev2\", \n            \"version\": 2\n          }\n        }, \n        \"quotas\": {\n          \"cinder\": {\n            \"gigabytes\": -1, \n            \"snapshots\": -1, \n            \"volumes\": -1\n          }\n        }, \n        \"users\": {\n          \"tenants\": 3, \n          \"users_per_tenant\": 3\n        }\n      }, \n      \"hooks\": [], \n      \"runner\": {\n        \"concurrency\": 20, \n        \"times\": 60, \n        \"type\": \"constant\"\n      }, \n      \"sla\": {\n        \"failure_rate\": {\n          \"max\": 10\n        }\n      }\n    }\n  ]\n}";
        $scope.scenarios = [{"load_profile": [["parallel iterations", [[0.0, 0], [1.260792911338806, 19.825508879682967], [2.521585822677612, 20], [3.7823787340164183, 20], [5.043171645355224, 20], [6.30396455669403, 20], [7.564757468032837, 20], [8.825550379371643, 20], [10.086343290710449, 20], [11.347136202049255, 20], [12.60792911338806, 20], [13.868722024726868, 20], [15.129514936065673, 20], [16.39030784740448, 20], [17.651100758743286, 20], [18.91189367008209, 20], [20.172686581420898, 20], [21.433479492759705, 20], [22.69427240409851, 20], [23.955065315437317, 20], [25.21585822677612, 19.405947492818328], [26.476651138114928, 19], [27.737444049453735, 17.71370949524511], [28.99823696079254, 18], [30.259029872131347, 18.72850693860035], [31.519822783470154, 20], [32.78061569480896, 20], [34.04140860614776, 20], [35.30220151748657, 20], [36.56299442882538, 19.230844861563885], [37.82378734016418, 18.25274207328164], [39.08458025150299, 13.949825561329057], [40.345373162841796, 12.129410261510646], [41.6061660741806, 14.140678954053836], [42.86695898551941, 17.6175455541902], [44.127751896858214, 14.867784504692429], [45.38854480819702, 13.082343947511154], [46.64933771953583, 16.453031445958548], [47.91013063087463, 19.746653418004552], [49.17092354221344, 20], [50.43171645355224, 19.353433647791373], [51.69250936489105, 19], [52.953302276229856, 19.2622605028055], [54.21409518756866, 19.27872762612163], [55.47488809890747, 18], [56.735681010246275, 18.104452395344335], [57.99647392158508, 19.851337919376487], [59.25726683292389, 20], [60.51805974426269, 20], [61.7788526556015, 20], [63.03964556694031, 20], [64.3004384782791, 19.836609681033664], [65.56123138961792, 18.140811789500262], [66.82202430095673, 18], [68.08281721229552, 18.96152355087328], [69.34361012363433, 18.575095856467712], [70.60440303497315, 17.682201627399643], [71.86519594631194, 17.380117109592234], [73.12598885765075, 18], [74.38678176898956, 19.123870927468023], [75.64757468032836, 19.185605143383544], [76.90836759166717, 17.218777682404927], [78.16916050300598, 16.65560602394426], [79.42995341434478, 17.123299840960787], [80.69074632568359, 18], [81.9515392370224, 19.023606007068487], [83.2123321483612, 19], [84.47312505970001, 19.453800018287204], [85.73391797103882, 18.28536880118162], [86.99471088237762, 18], [88.25550379371643, 18.982072633040342], [89.51629670505524, 19.55421854011481], [90.77708961639404, 16.864935640957917], [92.03788252773285, 16.014212882643086], [93.29867543907166, 18.110356658607156], [94.55946835041046, 18.496453710876462], [95.82026126174927, 17], [97.08105417308808, 17], [98.34184708442687, 17], [99.60263999576568, 17], [100.86343290710448, 16.80084143893248], [102.12422581844329, 16], [103.3850187297821, 14.432447234976344], [104.6458116411209, 13.375516365939855], [105.90660455245971, 12.016621629711171], [107.16739746379852, 11.48857871076598], [108.42819037513732, 11], [109.68898328647613, 10.057153535390142], [110.94977619781494, 9.013869606066471], [112.21056910915374, 8], [113.47136202049255, 6.323874642522382], [114.73215493183136, 5.398954744289538], [115.99294784317016, 4], [117.25374075450897, 4], [118.51453366584778, 4], [119.77532657718658, 4], [121.03611948852539, 4], [122.2969123998642, 3.046708384431124], [123.557705311203, 2.1108750043891904], [124.8184982225418, 0.03921568627451658], [126.07929113388062, 0]]]], "errors": [], "name": "create_and_attach_volume", "has_output": false, "runner": "constant", "hooks": [], "iterations_count": 60, "output_errors": [], "pos": "0", "load_duration": 123.60714817047119, "sla_success": true, "met": "create_and_attach_volume", "atomic": {"pie": [["nova.boot_server", 18.95113277832667], ["cinder.create_volume", 4.188076261679331], ["nova.attach_volume", 4.543646256128947], ["nova.detach_volume", 3.3042569200197858], ["cinder.delete_volume", 2.414798394838969], ["nova.delete_server", 3.80235241651535]], "iter": [["nova.boot_server", [[1, 14.86678695678711], [2, 24.780781030654907], [3, 15.40471887588501], [4, 24.245420932769775], [5, 24.45265007019043], [6, 24.875030040740967], [7, 15.780184030532837], [8, 20.3092999458313], [9, 20.286228895187378], [10, 24.881366968154907], [11, 26.365952968597412], [12, 20.76021099090576], [13, 22.55583095550537], [14, 24.18400502204895], [15, 22.649095058441162], [16, 22.266989946365356], [17, 22.783117055892944], [18, 21.71970009803772], [19, 22.417561054229736], [20, 24.584952116012573], [21, 10.719007015228271], [22, 12.568957090377808], [23, 12.49617886543274], [24, 12.31817078590393], [25, 13.039769887924194], [26, 18.651159048080444], [27, 15.407373905181885], [28, 15.86426591873169], [29, 15.659204006195068], [30, 13.336212158203125], [31, 12.68959093093872], [32, 14.43972396850586], [33, 16.398442029953003], [34, 14.138654947280884], [35, 19.837811946868896], [36, 18.89320397377014], [37, 14.017553091049194], [38, 20.884425163269043], [39, 13.425025939941406], [40, 19.63748788833618], [41, 12.72424602508545], [42, 17.65288996696472], [43, 20.521883010864258], [44, 21.066050052642822], [45, 25.29147696495056], [46, 17.190024852752686], [47, 20.81549596786499], [48, 16.491455078125], [49, 17.01383399963379], [50, 18.84712791442871], [51, 18.763617038726807], [52, 25.06412100791931], [53, 15.863372802734375], [54, 20.06711506843567], [55, 19.163535833358765], [56, 24.307654857635498], [57, 17.01441192626953], [58, 21.777697801589966], [59, 21.67522692680359], [60, 21.16462802886963]]], ["cinder.create_volume", [[1, 2.300673007965088], [2, 4.575868844985962], [3, 2.3451180458068848], [4, 4.450872898101807], [5, 4.329017162322998], [6, 4.45713210105896], [7, 2.3518788814544678], [8, 2.575110912322998], [9, 2.65596079826355], [10, 4.566882133483887], [11, 2.673814058303833], [12, 2.6163270473480225], [13, 2.49454402923584], [14, 4.481411933898926], [15, 2.4030988216400146], [16, 2.4178528785705566], [17, 4.4917168617248535], [18, 2.395364999771118], [19, 2.281165838241577], [20, 4.484455108642578], [21, 2.407924175262451], [22, 2.4719860553741455], [23, 2.3331189155578613], [24, 5.872535943984985], [25, 3.3263258934020996], [26, 8.7480309009552], [27, 2.3020029067993164], [28, 5.805016994476318], [29, 8.992637157440186], [30, 3.0807371139526367], [31, 2.6570210456848145], [32, 2.6093380451202393], [33, 5.8009560108184814], [34, 5.787109851837158], [35, 5.648691892623901], [36, 8.40299391746521], [37, 8.49438214302063], [38, 7.361149072647095], [39, 8.655622959136963], [40, 8.739909887313843], [41, 8.766520977020264], [42, 5.777854919433594], [43, 5.581485033035278], [44, 5.53757905960083], [45, 2.9198200702667236], [46, 5.639158010482788], [47, 5.545053958892822], [48, 2.3765759468078613], [49, 2.537719964981079], [50, 3.2036449909210205], [51, 2.2879741191864014], [52, 3.7344858646392822], [53, 3.411591053009033], [54, 3.068010091781616], [55, 2.8396108150482178], [56, 2.6279029846191406], [57, 3.0925259590148926], [58, 2.348662853240967], [59, 2.556074857711792], [60, 2.586566925048828]]], ["nova.attach_volume", [[1, 2.949383020401001], [2, 7.057431936264038], [3, 2.4339230060577393], [4, 6.772173166275024], [5, 6.780537843704224], [6, 7.556246042251587], [7, 2.632572889328003], [8, 6.614741086959839], [9, 6.626122951507568], [10, 6.898084878921509], [11, 6.657485008239746], [12, 7.009493112564087], [13, 4.924086093902588], [14, 6.697668075561523], [15, 4.516039133071899], [16, 4.80750584602356], [17, 2.497006893157959], [18, 4.561763048171997], [19, 4.538218021392822], [20, 6.745227098464966], [21, 2.547435998916626], [22, 2.6459848880767822], [23, 2.6278748512268066], [24, 2.774306058883667], [25, 3.1260018348693848], [26, 2.4672160148620605], [27, 9.587503910064697], [28, 2.387666940689087], [29, 5.6630401611328125], [30, 5.983897924423218], [31, 2.6729869842529297], [32, 5.252264022827148], [33, 2.4074549674987793], [34, 5.732371091842651], [35, 2.7717230319976807], [36, 5.921087026596069], [37, 5.831669092178345], [38, 6.676368951797485], [39, 4.731074094772339], [40, 5.668731212615967], [41, 7.120145082473755], [42, 2.781322956085205], [43, 3.754815101623535], [44, 4.565706968307495], [45, 2.491804838180542], [46, 2.7456390857696533], [47, 2.8369171619415283], [48, 6.004994869232178], [49, 6.086299180984497], [50, 8.208935976028442], [51, 2.991698980331421], [52, 2.5202040672302246], [53, 5.671537160873413], [54, 2.52408504486084], [55, 2.6465117931365967], [56, 2.6420319080352783], [57, 2.526945114135742], [58, 2.4273948669433594], [59, 2.624314069747925], [60, 2.6951029300689697]]], ["nova.detach_volume", [[1, 2.6418988704681396], [2, 2.372143030166626], [3, 2.6094441413879395], [4, 2.3377108573913574], [5, 4.410765171051025], [6, 2.328634023666382], [7, 2.495405912399292], [8, 4.521437883377075], [9, 4.518265962600708], [10, 2.335641860961914], [11, 2.341500997543335], [12, 4.490668058395386], [13, 4.763477087020874], [14, 4.5275421142578125], [15, 4.7018210887908936], [16, 4.502309083938599], [17, 4.57129693031311], [18, 4.396509885787964], [19, 4.524182081222534], [20, 2.341392993927002], [21, 2.6124889850616455], [22, 2.3462650775909424], [23, 2.3473777770996094], [24, 2.8891940116882324], [25, 3.6211600303649902], [26, 6.485408067703247], [27, 5.591933965682983], [28, 4.177227020263672], [29, 2.7145769596099854], [30, 3.2694971561431885], [31, 3.217844009399414], [32, 3.6535420417785645], [33, 5.55035400390625], [34, 2.4912760257720947], [35, 2.5688540935516357], [36, 4.604407072067261], [37, 2.425624132156372], [38, 5.7153160572052], [39, 2.4335379600524902], [40, 5.662400960922241], [41, 5.684183835983276], [42, 2.734160900115967], [43, 2.3842389583587646], [44, 2.418837070465088], [45, 2.3765690326690674], [46, 2.4299092292785645], [47, 2.71012806892395], [48, 2.444126844406128], [49, 2.520542860031128], [50, 2.370250940322876], [51, 2.3364999294281006], [52, 2.4488718509674072], [53, 2.342456102371216], [54, 2.387706995010376], [55, 2.3503358364105225], [56, 2.437185049057007], [57, 2.4473230838775635], [58, 2.3076181411743164], [59, 2.5966060161590576], [60, 2.4175310134887695]]], ["cinder.delete_volume", [[1, 2.20166015625], [2, 2.1999289989471436], [3, 2.1799869537353516], [4, 2.172679901123047], [5, 2.2295660972595215], [6, 2.21743106842041], [7, 4.267369031906128], [8, 2.1742000579833984], [9, 2.1642329692840576], [10, 2.171886920928955], [11, 2.185241937637329], [12, 2.1594009399414062], [13, 2.1492319107055664], [14, 2.2302629947662354], [15, 2.159956932067871], [16, 2.191225051879883], [17, 2.183140993118286], [18, 4.416178941726685], [19, 2.132333993911743], [20, 2.3085238933563232], [21, 2.186882972717285], [22, 2.192337989807129], [23, 2.392378091812134], [24, 2.1949381828308105], [25, 5.277733087539673], [26, 6.261143922805786], [27, 2.1937530040740967], [28, 2.281933069229126], [29, 2.2620880603790283], [30, 2.1592941284179688], [31, 2.145480155944824], [32, 2.179203987121582], [33, 2.21341609954834], [34, 2.453126907348633], [35, 2.3839969635009766], [36, 2.253870964050293], [37, 2.2609198093414307], [38, 2.410036087036133], [39, 2.257452964782715], [40, 2.232917070388794], [41, 2.3103981018066406], [42, 2.2553439140319824], [43, 2.27801513671875], [44, 2.3262908458709717], [45, 2.4925360679626465], [46, 2.242281198501587], [47, 2.246330976486206], [48, 2.176846981048584], [49, 2.157014846801758], [50, 2.39719295501709], [51, 2.138805866241455], [52, 2.1660690307617188], [53, 2.157945156097412], [54, 2.2887279987335205], [55, 2.1864500045776367], [56, 2.15903902053833], [57, 2.140495777130127], [58, 2.1734278202056885], [59, 2.143993854522705], [60, 2.1633548736572266]]], ["nova.delete_server", [[1, 4.601693868637085], [2, 4.985851049423218], [3, 2.4931721687316895], [4, 2.7118020057678223], [5, 4.604698896408081], [6, 4.738741159439087], [7, 2.495572090148926], [8, 2.3956830501556396], [9, 4.97089695930481], [10, 5.0767059326171875], [11, 5.050379037857056], [12, 5.409981966018677], [13, 4.640068054199219], [14, 4.660588979721069], [15, 4.623199939727783], [16, 4.778167009353638], [17, 4.71884822845459], [18, 2.3801519870758057], [19, 4.879178047180176], [20, 4.898525953292847], [21, 4.670000076293945], [22, 4.80428409576416], [23, 4.6921000480651855], [24, 2.4474730491638184], [25, 2.416024923324585], [26, 4.40468692779541], [27, 2.43629789352417], [28, 2.545658826828003], [29, 2.3991539478302], [30, 2.706153154373169], [31, 2.54447603225708], [32, 2.6050238609313965], [33, 2.693380117416382], [34, 4.869493007659912], [35, 8.816926002502441], [36, 6.712880849838257], [37, 4.844343185424805], [38, 2.784395933151245], [39, 2.4370460510253906], [40, 4.6357810497283936], [41, 7.914769887924194], [42, 4.6498260498046875], [43, 5.895828008651733], [44, 2.515479803085327], [45, 4.611086130142212], [46, 2.6491289138793945], [47, 5.534116983413696], [48, 2.5619399547576904], [49, 2.3947839736938477], [50, 2.5180740356445312], [51, 2.488294839859009], [52, 2.4016788005828857], [53, 2.5488550662994385], [54, 2.81138014793396], [55, 2.4728100299835205], [56, 2.4850761890411377], [57, 2.383589029312134], [58, 2.4636049270629883], [59, 2.5487709045410156], [60, 2.7125658988952637]]]], "histogram": {"data": [[{"disabled": 0, "values": [{"y": 4, "x": 12.674875259399414}, {"y": 8, "x": 14.630743503570557}, {"y": 9, "x": 16.5866117477417}, {"y": 4, "x": 18.542479991912842}, {"y": 10, "x": 20.498348236083984}, {"y": 11, "x": 22.454216480255127}, {"y": 6, "x": 24.41008472442627}, {"y": 8, "x": 26.365952968597412}], "key": "nova.boot_server", "view": "Square Root Choice"}, {"disabled": 1, "values": [{"y": 30, "x": 3.120099753141403}, {"y": 4, "x": 3.9590336680412292}, {"y": 8, "x": 4.797967582941055}, {"y": 3, "x": 5.636901497840881}, {"y": 7, "x": 6.475835412740707}, {"y": 0, "x": 7.3147693276405334}, {"y": 1, "x": 8.15370324254036}, {"y": 7, "x": 8.992637157440186}], "key": "cinder.create_volume", "view": "Square Root Choice"}, {"disabled": 2, "values": [{"y": 27, "x": 3.287646561861038}, {"y": 1, "x": 4.1876261830329895}, {"y": 7, "x": 5.087605804204941}, {"y": 8, "x": 5.987585425376892}, {"y": 10, "x": 6.887565046548843}, {"y": 5, "x": 7.787544667720795}, {"y": 1, "x": 8.687524288892746}, {"y": 1, "x": 9.587503910064697}], "key": "nova.attach_volume", "view": "Square Root Choice"}, {"disabled": 3, "values": [{"y": 36, "x": 2.8298418819904327}, {"y": 3, "x": 3.352065622806549}, {"y": 2, "x": 3.8742893636226654}, {"y": 2, "x": 4.396513104438782}, {"y": 11, "x": 4.918736845254898}, {"y": 0, "x": 5.440960586071014}, {"y": 5, "x": 5.963184326887131}, {"y": 1, "x": 6.485408067703247}], "key": "nova.detach_volume", "view": "Square Root Choice"}, {"disabled": 4, "values": [{"y": 56, "x": 2.6484352350234985}, {"y": 0, "x": 3.164536476135254}, {"y": 0, "x": 3.6806377172470093}, {"y": 0, "x": 4.196738958358765}, {"y": 2, "x": 4.71284019947052}, {"y": 0, "x": 5.228941440582275}, {"y": 1, "x": 5.745042681694031}, {"y": 1, "x": 6.261143922805786}], "key": "cinder.delete_volume", "view": "Square Root Choice"}, {"disabled": 5, "values": [{"y": 31, "x": 3.184748739004135}, {"y": 0, "x": 3.9893454909324646}, {"y": 14, "x": 4.793942242860794}, {"y": 11, "x": 5.5985389947891235}, {"y": 1, "x": 6.403135746717453}, {"y": 1, "x": 7.2077324986457825}, {"y": 1, "x": 8.012329250574112}, {"y": 1, "x": 8.816926002502441}], "key": "nova.delete_server", "view": "Square Root Choice"}], [{"disabled": 0, "values": [{"y": 6, "x": 12.954285008566721}, {"y": 7, "x": 15.189563001905169}, {"y": 11, "x": 17.424840995243617}, {"y": 7, "x": 19.660118988582067}, {"y": 13, "x": 21.895396981920516}, {"y": 5, "x": 24.130674975258962}, {"y": 11, "x": 26.365952968597412}], "key": "nova.boot_server", "view": "Sturges Formula"}, {"disabled": 1, "values": [{"y": 31, "x": 3.2399474552699496}, {"y": 3, "x": 4.198729072298322}, {"y": 8, "x": 5.1575106893266955}, {"y": 10, "x": 6.116292306355067}, {"y": 0, "x": 7.0750739233834405}, {"y": 1, "x": 8.033855540411814}, {"y": 7, "x": 8.992637157440186}], "key": "cinder.create_volume", "view": "Sturges Formula"}, {"disabled": 2, "values": [{"y": 27, "x": 3.416215079171317}, {"y": 1, "x": 4.444763217653547}, {"y": 8, "x": 5.473311356135778}, {"y": 9, "x": 6.5018594946180075}, {"y": 12, "x": 7.530407633100237}, {"y": 2, "x": 8.558955771582468}, {"y": 1, "x": 9.587503910064697}], "key": "nova.attach_volume", "view": "Sturges Formula"}, {"disabled": 3, "values": [{"y": 37, "x": 2.9044452735355923}, {"y": 2, "x": 3.5012724058968683}, {"y": 2, "x": 4.098099538258143}, {"y": 11, "x": 4.69492667061942}, {"y": 2, "x": 5.291753802980695}, {"y": 5, "x": 5.888580935341971}, {"y": 1, "x": 6.485408067703247}], "key": "nova.detach_volume", "view": "Sturges Formula"}, {"disabled": 4, "values": [{"y": 56, "x": 2.7221639837537492}, {"y": 0, "x": 3.3119939735957553}, {"y": 0, "x": 3.901823963437762}, {"y": 2, "x": 4.4916539532797675}, {"y": 0, "x": 5.081483943121774}, {"y": 1, "x": 5.6713139329637805}, {"y": 1, "x": 6.261143922805786}], "key": "cinder.delete_volume", "view": "Sturges Formula"}, {"disabled": 5, "values": [{"y": 31, "x": 3.2996911321367537}, {"y": 0, "x": 4.219230277197702}, {"y": 23, "x": 5.138769422258649}, {"y": 3, "x": 6.058308567319598}, {"y": 1, "x": 6.977847712380545}, {"y": 0, "x": 7.897386857441493}, {"y": 2, "x": 8.816926002502441}], "key": "nova.delete_server", "view": "Sturges Formula"}], [{"disabled": 0, "values": [{"y": 4, "x": 12.674875259399414}, {"y": 8, "x": 14.630743503570557}, {"y": 9, "x": 16.5866117477417}, {"y": 4, "x": 18.542479991912842}, {"y": 10, "x": 20.498348236083984}, {"y": 11, "x": 22.454216480255127}, {"y": 6, "x": 24.41008472442627}, {"y": 8, "x": 26.365952968597412}], "key": "nova.boot_server", "view": "Rice Rule"}, {"disabled": 1, "values": [{"y": 30, "x": 3.120099753141403}, {"y": 4, "x": 3.9590336680412292}, {"y": 8, "x": 4.797967582941055}, {"y": 3, "x": 5.636901497840881}, {"y": 7, "x": 6.475835412740707}, {"y": 0, "x": 7.3147693276405334}, {"y": 1, "x": 8.15370324254036}, {"y": 7, "x": 8.992637157440186}], "key": "cinder.create_volume", "view": "Rice Rule"}, {"disabled": 2, "values": [{"y": 27, "x": 3.287646561861038}, {"y": 1, "x": 4.1876261830329895}, {"y": 7, "x": 5.087605804204941}, {"y": 8, "x": 5.987585425376892}, {"y": 10, "x": 6.887565046548843}, {"y": 5, "x": 7.787544667720795}, {"y": 1, "x": 8.687524288892746}, {"y": 1, "x": 9.587503910064697}], "key": "nova.attach_volume", "view": "Rice Rule"}, {"disabled": 3, "values": [{"y": 36, "x": 2.8298418819904327}, {"y": 3, "x": 3.352065622806549}, {"y": 2, "x": 3.8742893636226654}, {"y": 2, "x": 4.396513104438782}, {"y": 11, "x": 4.918736845254898}, {"y": 0, "x": 5.440960586071014}, {"y": 5, "x": 5.963184326887131}, {"y": 1, "x": 6.485408067703247}], "key": "nova.detach_volume", "view": "Rice Rule"}, {"disabled": 4, "values": [{"y": 56, "x": 2.6484352350234985}, {"y": 0, "x": 3.164536476135254}, {"y": 0, "x": 3.6806377172470093}, {"y": 0, "x": 4.196738958358765}, {"y": 2, "x": 4.71284019947052}, {"y": 0, "x": 5.228941440582275}, {"y": 1, "x": 5.745042681694031}, {"y": 1, "x": 6.261143922805786}], "key": "cinder.delete_volume", "view": "Rice Rule"}, {"disabled": 5, "values": [{"y": 31, "x": 3.184748739004135}, {"y": 0, "x": 3.9893454909324646}, {"y": 14, "x": 4.793942242860794}, {"y": 11, "x": 5.5985389947891235}, {"y": 1, "x": 6.403135746717453}, {"y": 1, "x": 7.2077324986457825}, {"y": 1, "x": 8.012329250574112}, {"y": 1, "x": 8.816926002502441}], "key": "nova.delete_server", "view": "Rice Rule"}]], "views": [{"id": 0, "name": "Square Root Choice"}, {"id": 1, "name": "Sturges Formula"}, {"id": 2, "name": "Rice Rule"}]}}, "iterations": {"pie": [["success", 60], ["errors", 0]], "iter": [["duration", [[1, 26.56254816055298], [2, 42.97241687774658], [3, 24.46686291694641], [4, 39.69109582901001], [5, 43.80764389038086], [6, 43.173643827438354], [7, 27.023252964019775], [8, 35.5907199382782], [9, 38.221981048583984], [10, 42.93082809448242], [11, 42.27462816238403], [12, 39.446523904800415], [13, 38.52938890457153], [14, 43.78182315826416], [15, 38.05358600616455], [16, 37.964447021484375], [17, 38.24549102783203], [18, 36.870445013046265], [19, 37.77291011810303], [20, 42.36329388618469], [21, 22.14392900466919], [22, 24.02998995780945], [23, 23.889261960983276], [24, 25.496880054473877], [25, 27.807824850082397], [26, 44.01789593696594], [27, 34.51911783218384], [28, 30.06222105026245], [29, 34.69095206260681], [30, 27.536019802093506], [31, 22.92768383026123], [32, 27.739346027374268], [33, 32.06423211097717], [34, 32.472277879714966], [35, 39.02826189994812], [36, 43.788697957992554], [37, 34.87481212615967], [38, 42.83206820487976], [39, 30.940035104751587], [40, 43.57750201225281], [41, 41.52056097984314], [42, 32.851743936538696], [43, 37.41774892807007], [44, 35.430126905441284], [45, 37.18363904953003], [46, 29.896433115005493], [47, 36.68832015991211], [48, 29.056216955184937], [49, 29.71043610572815], [50, 34.5456759929657], [51, 28.007308959960938], [52, 35.33568096160889], [53, 28.996276140213013], [54, 30.14726686477661], [55, 28.65947985649109], [56, 33.65911889076233], [57, 26.605541944503784], [58, 30.49867010116577], [59, 31.14556908607483], [60, 30.739933013916016]]], ["idle_duration", [[1, 3.0], [2, 3.0], [3, 3.0], [4, 3.0], [5, 3.0], [6, 3.0], [7, 3.0], [8, 3.0], [9, 3.0], [10, 3.0], [11, 3.0], [12, 3.0], [13, 3.0], [14, 3.0], [15, 3.0], [16, 3.0], [17, 3.0], [18, 3.0], [19, 3.0], [20, 3.0], [21, 3.0], [22, 3.0], [23, 3.0], [24, 3.0], [25, 3.0], [26, 3.0], [27, 3.0], [28, 3.0], [29, 3.0], [30, 3.0], [31, 3.0], [32, 3.0], [33, 3.0], [34, 3.0], [35, 3.0], [36, 3.0], [37, 3.0], [38, 3.0], [39, 3.0], [40, 3.0], [41, 3.0], [42, 3.0], [43, 3.0], [44, 3.0], [45, 3.0], [46, 3.0], [47, 3.0], [48, 3.0], [49, 3.0], [50, 3.0], [51, 3.0], [52, 3.0], [53, 3.0], [54, 3.0], [55, 3.0], [56, 3.0], [57, 3.0], [58, 3.0], [59, 3.0], [60, 3.0]]]], "histogram": {"data": [[{"disabled": null, "values": [{"y": 5, "x": 24.878174871206284}, {"y": 5, "x": 27.612420737743378}, {"y": 10, "x": 30.346666604280472}, {"y": 7, "x": 33.080912470817566}, {"y": 8, "x": 35.81515833735466}, {"y": 10, "x": 38.549404203891754}, {"y": 3, "x": 41.28365007042885}, {"y": 12, "x": 44.01789593696594}], "key": "task", "view": "Square Root Choice"}], [{"disabled": null, "values": [{"y": 5, "x": 25.268781423568726}, {"y": 8, "x": 28.39363384246826}, {"y": 11, "x": 31.518486261367798}, {"y": 6, "x": 34.643338680267334}, {"y": 9, "x": 37.76819109916687}, {"y": 9, "x": 40.893043518066406}, {"y": 12, "x": 44.01789593696594}], "key": "task", "view": "Sturges Formula"}], [{"disabled": null, "values": [{"y": 5, "x": 24.878174871206284}, {"y": 5, "x": 27.612420737743378}, {"y": 10, "x": 30.346666604280472}, {"y": 7, "x": 33.080912470817566}, {"y": 8, "x": 35.81515833735466}, {"y": 10, "x": 38.549404203891754}, {"y": 3, "x": 41.28365007042885}, {"y": 12, "x": 44.01789593696594}], "key": "task", "view": "Rice Rule"}]], "views": [{"id": 0, "name": "Square Root Choice"}, {"id": 1, "name": "Sturges Formula"}, {"id": 2, "name": "Rice Rule"}]}}, "additive_output": [], "table": {"rows": [["nova.boot_server", 10.719, 19.401, 24.605, 24.891, 26.366, 18.951, "100.0%", 60], ["cinder.create_volume", 2.281, 3.148, 8.412, 8.74, 8.993, 4.188, "100.0%", 60], ["nova.attach_volume", 2.388, 4.55, 6.909, 7.142, 9.588, 4.544, "100.0%", 60], ["nova.detach_volume", 2.308, 2.603, 4.842, 5.663, 6.485, 3.304, "100.0%", 60], ["cinder.delete_volume", 2.132, 2.197, 2.414, 4.275, 6.261, 2.415, "100.0%", 60], ["nova.delete_server", 2.38, 2.798, 5.11, 5.937, 8.817, 3.802, "100.0%", 60], ["total", 22.144, 34.618, 42.993, 43.782, 44.018, 34.205, "100.0%", 60]], "cols": ["Action", "Min (sec)", "Median (sec)", "90%ile (sec)", "95%ile (sec)", "Max (sec)", "Avg (sec)", "Success", "Count"]}, "full_duration": 135.12548995018005, "config": "{\n  \"CinderVolumes.create_and_attach_volume\": [\n    {\n      \"runner\": {\n        \"type\": \"constant\", \n        \"concurrency\": 20, \n        \"times\": 60\n      }, \n      \"hooks\": [], \n      \"args\": {\n        \"image\": {\n          \"name\": \"cirros_vm\"\n        }, \n        \"flavor\": {\n          \"name\": \"m1.tiny\"\n        }, \n        \"size\": 10\n      }, \n      \"sla\": {\n        \"failure_rate\": {\n          \"max\": 10\n        }\n      }, \n      \"context\": {\n        \"api_versions\": {\n          \"cinder\": {\n            \"service_type\": \"volumev2\", \n            \"version\": 2\n          }\n        }, \n        \"users\": {\n          \"users_per_tenant\": 3, \n          \"tenants\": 3\n        }, \n        \"quotas\": {\n          \"cinder\": {\n            \"gigabytes\": -1, \n            \"snapshots\": -1, \n            \"volumes\": -1\n          }\n        }\n      }\n    }\n  ]\n}", "sla": [{"criterion": "failure_rate", "detail": "Failure rate criteria 0.00% <= 0.00% <= 10.00% - Passed", "success": true}], "complete_output": [[], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], []], "cls": "CinderVolumes"}];

      $scope.location = {
        /* #/path/hash/sub/div */
        normalize: function(str) {
          /* Remove unwanted characters from string */
          if (typeof str !== "string") { return "" }
          return str.replace(/[^\w\-\.]/g, "")
        },
        uri: function(obj) {
          /* Getter/Setter */
          if (! obj) {
            var uri = {path: "", hash: "", sub: "", div: ""};
            var arr = ["div", "sub", "hash", "path"];
            angular.forEach($location.url().split("/"), function(value){
              var v = $scope.location.normalize(value);
              if (v) { var k = arr.pop(); if (k) { this[k] = v }}
            }, uri);
            return uri
          }
          var arr = [obj.path, obj.hash, obj.sub, obj.div], res = [];
          for (var i in arr) { if (! arr[i]) { break }; res.push(arr[i]) }
          return $location.url("/" + res.join("/"))
        },
        path: function(path, hash) {
          /* Getter/Setter */
          if (path === "") { return this.uri({}) }
          path = this.normalize(path);
          var uri = this.uri();
          if (! path) { return uri.path }
          uri.path = path;
          var _hash = this.normalize(hash);
          if (_hash || hash === "") { uri.hash = _hash }
          return this.uri(uri)
        },
        hash: function(hash) {
          /* Getter/Setter */
          if (hash) { this.uri({path:this.uri().path, hash:hash}) }
          return this.uri().hash
        }
      }

      /* Dispatch */

      $scope.route = function(uri) {
        if (! $scope.scenarios_map) { return }

        // Expand menu if there is only one menu group
        if ($scope.nav.length === 1) {
          $scope.nav_idx = $scope.nav[0].idx;
        }

        if (uri.path in $scope.scenarios_map) {
          $scope.view = {is_scenario:true};
          $scope.scenario = $scope.scenarios_map[uri.path];
          $scope.nav_idx = $scope.nav_map[uri.path];
          if ($scope.scenario.iterations.histogram.views.length) {
            $scope.mainHistogram = $scope.scenario.iterations.histogram.views[0]
          }
          if ($scope.scenario.atomic.histogram.views.length) {
            $scope.atomicHistogram = $scope.scenario.atomic.histogram.views[0]
          }
          $scope.outputIteration = 0;
          $scope.showTab(uri);
        } else {
          $scope.scenario = null;
          if (uri.path === "source") {
            $scope.view = {is_source:true}
          } else {
            $scope.view = {is_main:true}
          }
        }
      }

      $scope.$on("$locationChangeSuccess", function (event, newUrl, oldUrl) {
        $scope.route($scope.location.uri())
      });

      $scope.showNav = function(nav_idx) { $scope.nav_idx = nav_idx }

      /* Tabs */

      $scope.tabs = [
        {
          id: "overview",
          name: "Overview",
          visible: function(){ return !! $scope.scenario.iterations.pie.length }
        },{
          id: "details",
          name: "Details",
          visible: function(){ return !! $scope.scenario.atomic.pie.length }
        },{
          id: "output",
          name: "Scenario Data",
          visible: function(){ return $scope.scenario.has_output }
        },{
          id: "hooks",
          name: "Hooks",
          visible: function(){ return $scope.scenario.hooks.length }
        },{
          id: "failures",
          name: "Failures",
          visible: function(){ return !! $scope.scenario.errors.length }
        },{
          id: "task",
          name: "Input task",
          visible: function(){ return !! $scope.scenario.config }
        }
      ];
      $scope.tabs_map = {};
      angular.forEach($scope.tabs,
                      function(tab){ this[tab.id] = tab }, $scope.tabs_map);

      $scope.showTab = function(uri) {
        $scope.tab = uri.hash in $scope.tabs_map ? uri.hash : "overview";
        if (uri.hash === "output") {
          if (typeof $scope.scenario.output === "undefined") {
            var has_additive = !! $scope.scenario.additive_output.length;
            var has_complete = !! ($scope.scenario.complete_output.length
                                   && $scope.scenario.complete_output[0].length);
            $scope.scenario.output = {
              has_additive: has_additive,
              has_complete: has_complete,
              length: has_additive + has_complete,
              active: has_additive ? "additive" : (has_complete ? "complete" : "")
            }
          }
          if (uri.sub && $scope.scenario.output["has_" + uri.sub]) {
            $scope.scenario.output.active = uri.sub
          }
        }
        else if (uri.hash === "hooks") {
          if ($scope.scenario.hooks.length) {
            var hook_idx = parseInt(uri.sub);

            if (isNaN(hook_idx) || ($scope.scenario.hooks.length - hook_idx) <= 0) {
              hook_idx = 0
            }

            if ($scope.scenario.hook_idx === hook_idx) {
              return
            }

            $scope.scenario.hooks.cur = $scope.scenario.hooks[hook_idx];
            $scope.scenario.hook_idx = hook_idx;
            if (typeof $scope.scenario.hooks.cur.active === "undefined") {
              if ($scope.scenario.hooks.cur.additive.length) {
                $scope.scenario.hooks.cur.active = "additive"
              }
              if ($scope.scenario.hooks.cur.complete.length) {
                if (typeof $scope.scenario.hooks.cur.active === "undefined") {
                  $scope.scenario.hooks.cur.active = "complete"
                }
                $scope.set_hook_run()
              }
            }
          }
        }
      }

      for (var i in $scope.tabs) {
        if ($scope.tabs[i].id === $scope.location.hash()) {
          $scope.tab = $scope.tabs[i].id
        }
        $scope.tabs[i].isVisible = function() {
          if ($scope.scenario) {
            if (this.visible()) { return true }
            /* If tab should be hidden but is selected - show another one */
            if (this.id === $scope.location.hash()) {
              for (var i in $scope.tabs) {
                var tab = $scope.tabs[i];
                if (tab.id != this.id && tab.visible()) {
                  $scope.tab = tab.id;
                  return false
                }
              }
            }
          }
          return false
        }
      }

      $scope.set_hook_run = function(idx) {
        if (typeof idx !== "undefined") {
          $scope.scenario.hooks.cur.run_idx = idx
        }
        else if (typeof $scope.scenario.hooks.cur.run_idx === "undefined") {
          $scope.scenario.hooks.cur.run_idx = 0
        }
        idx = $scope.scenario.hooks.cur.run_idx;
        if (($scope.scenario.hooks.cur.complete.length - idx) > 0) {
          $scope.scenario.hooks.cur.run = $scope.scenario.hooks.cur.complete[idx]
        }
      }

      $scope.complete_hooks_as_dropdown = function() {
        return $scope.scenario.hooks.cur.complete.length > 10
      }

      /* Other helpers */

      $scope.showError = function(message) {
          return (function (e) {
            e.style.display = "block";
            e.textContent = message
          })(document.getElementById("page-error"))
      }

      $scope.compact_atomics = function() {
        return ($scope.scenario && $scope.scenario.atomic.iter.length < 9)
      }

      /* Initialization */

      angular.element(document).ready(function(){
        if (! $scope.scenarios.length) {
          return $scope.showError("No data...")
        }

        /* Compose data mapping */

        $scope.nav = [];
        $scope.nav_map = {};
        $scope.scenarios_map = {};
        var met = [], itr = 0, cls_idx = 0;
        var prev_cls, prev_met;

        for (var idx in $scope.scenarios) {
          var sc = $scope.scenarios[idx];
          if (! prev_cls) {
            prev_cls = sc.cls
          }
          else if (prev_cls !== sc.cls) {
            $scope.nav.push({cls:prev_cls, met:met, idx:cls_idx});
            prev_cls = sc.cls;
            met = [];
            itr = 1;
            cls_idx += 1
          }

          if (prev_met !== sc.met) { itr = 1 };
          sc.ref = $scope.location.normalize(sc.cls+"."+sc.met+(itr > 1 ? "-"+itr : ""));
          $scope.scenarios_map[sc.ref] = sc;
          $scope.nav_map[sc.ref] = cls_idx;
          met.push({name:sc.name, itr:itr, idx:idx, ref:sc.ref});
          prev_met = sc.met;
          itr += 1;
        }

        if (met.length) {
          $scope.nav.push({cls:prev_cls, met:met, idx:cls_idx})
        }

        /* Start */

        var uri = $scope.location.uri();
        uri.path = $scope.location.path();
        $scope.route(uri);
        $scope.$digest()
      })
    };

    if (typeof angular === "object") {
      angular.module("App", [])
        .controller("Controller", ["$scope", "$location", controllerFunction])
        .directive("widget", widgetDirective)
    }


</script>
  <style>
    body { margin:0; padding:0 0 50px; font-size:14px; font-family:Helvetica,Arial,sans-serif }
    a, a:active, a:focus, a:visited { text-decoration:none; outline:none }
    p { margin:0; padding:5px 0 }
    p.thesis { padding:10px 0 }
    h1 { color:#666; margin:0 0 20px; font-size:30px; font-weight:normal }
    h2, .h2 { color:#666; margin:24px 0 6px; font-size:25px; font-weight:normal }
    h3, .h3 { color:#777; margin:12px 0 4px; font-size:18px; font-weight:normal }
    table { border-collapse:collapse; border-spacing:0; width:100%; font-size:12px; margin:0 0 10px }
    table th { text-align:left; padding:8px; color:#000; border:2px solid #ddd; border-width:0 0 2px 0 }
    table th.sortable { cursor:pointer }
    table td { text-align:left; border-top:1px solid #ddd; padding:8px; color:#333 }
    table.compact td { padding:4px 8px }
    table.striped tr:nth-child(odd) td { background:#f9f9f9 }
    table.linked tbody tr:hover { background:#f9f9f9; cursor:pointer }
    .pointer { cursor:pointer }
    .rich, .rich td { font-weight:bold }
    .code { padding:10px; font-size:13px; color:#333; background:#f6f6f6; border:1px solid #e5e5e5; border-radius:4px }

    .header { text-align:left; background:#333; font-size:18px; padding:13px 0; margin-bottom:20px; color:#fff; background-image:linear-gradient(to bottom, #444 0px, #222 100%) }
    .header a, .header a:visited, .header a:focus { color:#999 }

    .notify-error { padding:5px 10px; background:#fee; color:red }
    .status-skip, .status-skip td { color:grey }
    .status-pass, .status-pass td { color:green }
    .status-fail, .status-fail td { color:red }
    .capitalize { text-transform:capitalize }
    
    .aside { margin:0 20px 0 0; display:block; width:255px; float:left }
    .aside > div { margin-bottom: 15px }
    .aside > div div:first-child { border-top-left-radius:4px; border-top-right-radius:4px }
    .aside > div div:last-child { border-bottom-left-radius:4px; border-bottom-right-radius:4px }
    .navcls { color:#678; background:#eee; border:1px solid #ddd; margin-bottom:-1px; display:block; padding:8px 9px; font-weight:bold; text-align:left; overflow:hidden; text-overflow:ellipsis; white-space:nowrap; cursor:pointer }
    .navcls.expanded { color:#469 }
    .navcls.active { background:#428bca; background-image:linear-gradient(to bottom, #428bca 0px, #3278b3 100%); border-color:#3278b3; color:#fff }
    .navmet { color:#555; background:#fff; border:1px solid #ddd; font-size:12px; display:block; margin-bottom:-1px; padding:8px 10px; text-align:left; text-overflow:ellipsis; white-space:nowrap; overflow:hidden; cursor:pointer }
    .navmet:hover { background:#f8f8f8 }
    .navmet.active, .navmet.active:hover { background:#428bca; background-image:linear-gradient(to bottom, #428bca 0px, #3278b3 100%); border-color:#3278b3; color:#fff }

    .buttn { color:#555; background:#fff; border:1px solid #ddd; border-radius:5px; font-size:12px; margin-bottom:-1px; padding:5px 7px; text-align:left; text-overflow:ellipsis; white-space:nowrap; overflow:hidden; cursor:pointer }
    .buttn:hover { background:#f8f8f8 }
    .buttn.active, .bttn.active:hover { background:#428bca; background-image:linear-gradient(to bottom, #428bca 0px, #3278b3 100%); border-color:#3278b3; color:#fff; cursor:default }

    .tabs { list-style:outside none none; margin:0 0 5px; padding:0; border-bottom:1px solid #ddd }
    .tabs:after { clear:both }
    .tabs li { float:left; margin-bottom:-1px; display:block; position:relative }
    .tabs li div { border:1px solid transparent; border-radius:4px 4px 0 0; line-height:20px; margin-right:2px; padding:10px 15px; color:#428bca }
    .tabs li div:hover { border-color:#eee #eee #ddd; background:#eee; cursor:pointer; }
    .tabs li.active div { background:#fff; border-color:#ddd #ddd transparent; border-style:solid; border-width:1px; color:#555; cursor:default }
    .failure-mesg { color:#900 }
    .failure-trace { color:#333; white-space:pre; overflow:auto }

    .link { color:#428BCA; padding:5px 15px 5px 5px; text-decoration:underline; cursor:pointer }
    .link.active { color:#333; text-decoration:none; cursor:default }

    .chart { padding:0; margin:0; width:890px }
    .chart svg { height:300px; padding:0; margin:0; overflow:visible; float:right }
    .chart.lower svg { height:180px }
    .chart-label-y { font-size:12px; position:relative; top:5px; padding:0; margin:0 }

    .expandable { cursor:pointer }
    .clearfix { clear:both }
    .sortable > .arrow { display:inline-block; width:12px; height:inherit; color:#c90 }
    .content-main { margin:0 5px; display:block; float:left }

    .content-wrap {  margin:0 auto; padding:0 5px;  }
    
    @media only screen and (min-width: 320px)  { .content-wrap { width:900px  } .content-main { width:600px } }
    @media only screen and (min-width: 900px)  { .content-wrap { width:880px  } .content-main { width:590px } }
    @media only screen and (min-width: 1000px) { .content-wrap { width:980px  } .content-main { width:690px } }
    @media only screen and (min-width: 1100px) { .content-wrap { width:1080px } .content-main { width:790px } }
    @media only screen and (min-width: 1200px) { .content-wrap { width:1180px } .content-main { width:890px } }

  </style>
</head>
<body ng-controller="Controller">

  <div class="header" id="page-header">
    <div class="content-wrap">
      <a href="https://github.com/openstack/rally">Rally</a>&nbsp;
      <span>task results</span>
    </div>
  </div>

  <div class="content-wrap" id="page-content">
    

    <p id="page-error" class="notify-error" style="display:none"></p>

    <div id="content-nav" class="aside" ng-show="scenarios.length" ng-cloack>
      <div>
        <div class="navcls"
             ng-class="{active:view.is_main}"
             ng-click="location.path('')">Task overview</div>
        <div class="navcls"
             ng-class="{active:view.is_source}"
             ng-click="location.path('source', '')">Input file</div>
      </div>
      <div>
        <div class="navcls" title="{{n.cls}}"
             ng-repeat-start="n in nav track by $index"
             ng-click="showNav(n.idx)"
             ng-class="{expanded:n.idx==nav_idx}">
                <span ng-hide="n.idx==nav_idx">&#9658;</span>
                <span ng-show="n.idx==nav_idx">&#9660;</span>
                {{n.cls}}</div>
        <div class="navmet" title="{{m.name}}"
             ng-show="n.idx==nav_idx"
             ng-class="{active:m.ref==scenario.ref}"
             ng-click="location.path(m.ref)"
             ng-repeat="m in n.met track by $index"
             ng-repeat-end>{{m.name}}</div>
      </div>
    </div>

    <div id="content-main" class="content-main" ng-show="scenarios.length" ng-cloak>

      <div ng-show="view.is_main">
        <h1>Task overview</h1>
        <table class="linked compact"
               ng-init="ov_srt='ref'; ov_dir=false">
          <thead>
            <tr>
              <th class="sortable"
                  title="Scenario name, with optional suffix of call number"
                  ng-click="ov_srt='ref'; ov_dir=!ov_dir">
                Scenario
                <span class="arrow">
                  <b ng-show="ov_srt=='ref' && !ov_dir">&#x25b4;</b>
                  <b ng-show="ov_srt=='ref' && ov_dir">&#x25be;</b>
                </span>
              <th class="sortable"
                  title="How long the scenario run, without context duration"
                  ng-click="ov_srt='load_duration'; ov_dir=!ov_dir">
                Load duration (s)
                <span class="arrow">
                  <b ng-show="ov_srt=='load_duration' && !ov_dir">&#x25b4;</b>
                  <b ng-show="ov_srt=='load_duration' && ov_dir">&#x25be;</b>
                </span>
              <th class="sortable"
                  title="Scenario duration plus context duration"
                  ng-click="ov_srt='full_duration'; ov_dir=!ov_dir">
                Full duration (s)
                <span class="arrow">
                  <b ng-show="ov_srt=='full_duration' && !ov_dir">&#x25b4;</b>
                  <b ng-show="ov_srt=='full_duration' && ov_dir">&#x25be;</b>
                </span>
              <th class="sortable" title="Number of iterations"
                  ng-click="ov_srt='iterations_count'; ov_dir=!ov_dir">
                Iterations
                <span class="arrow">
                  <b ng-show="ov_srt=='iterations_count' && !ov_dir">&#x25b4;</b>
                  <b ng-show="ov_srt=='iterations_count' && ov_dir">&#x25be;</b>
                </span>
              <th class="sortable" title="Scenario runner type"
                  ng-click="ov_srt='runner'; ov_dir=!ov_dir">
                Runner
                <span class="arrow">
                  <b ng-show="ov_srt=='runner' && !ov_dir">&#x25b4;</b>
                  <b ng-show="ov_srt=='runner' && ov_dir">&#x25be;</b>
                </span>
              <th class="sortable" title="Number of errors occurred"
                  ng-click="ov_srt='errors.length'; ov_dir=!ov_dir">
                Errors
                <span class="arrow">
                  <b ng-show="ov_srt=='errors.length' && !ov_dir">&#x25b4;</b>
                  <b ng-show="ov_srt=='errors.length' && ov_dir">&#x25be;</b>
                </span>
              <th class="sortable" title="Number of hooks"
                  ng-click="ov_srt='hooks.length'; ov_dir=!ov_dir">
                Hooks
                <span class="arrow">
                  <b ng-show="ov_srt=='hooks.length' && !ov_dir">&#x25b4;</b>
                  <b ng-show="ov_srt=='hooks.length' && ov_dir">&#x25be;</b>
                </span>
              <th class="sortable" title="Whether SLA check is successful"
                  ng-click="ov_srt='sla_success'; ov_dir=!ov_dir">
                Success (SLA)
                <span class="arrow">
                  <b ng-show="ov_srt=='sla_success' && !ov_dir">&#x25b4;</b>
                  <b ng-show="ov_srt=='sla_success' && ov_dir">&#x25be;</b>
                </span>
            <tr>
          </thead>
          <tbody>
            <tr ng-repeat="sc in scenarios | orderBy:ov_srt:ov_dir"
                ng-click="location.path(sc.ref)">
              <td>{{sc.ref}}
              <td>{{sc.load_duration | number:3}}
              <td>{{sc.full_duration | number:3}}
              <td>{{sc.iterations_count}}
              <td>{{sc.runner}}
              <td>{{sc.errors.length}}
              <td>{{sc.hooks.length}}
              <td>
                <span ng-show="sc.sla_success" class="status-pass">&#x2714;</span>
                <span ng-hide="sc.sla_success" class="status-fail">&#x2716;</span>
            <tr>
          </tbody>
        </table>
      </div>

      <div ng-show="view.is_source">
        <h1>Input file</h1>
        <pre class="code">{{source}}</pre>
      </div>

      <div ng-show="view.is_scenario">
        <h1>{{scenario.cls}}.<wbr>{{scenario.name}} ({{scenario.full_duration | number:3}}s)</h1>
        <ul class="tabs">
          <li ng-repeat="t in tabs"
              ng-show="t.isVisible()"
              ng-class="{active:t.id == tab}"
              ng-click="location.hash(t.id)">
            <div>{{t.name}}</div>
          </li>
          <div class="clearfix"></div>
        </ul>
        <div ng-include="tab"></div>

        <script type="text/ng-template" id="overview">
          <p class="thesis">
            Load duration: <b>{{scenario.load_duration | number:3}} s</b> &nbsp;
            Full duration: <b>{{scenario.full_duration | number:3}} s</b> &nbsp;
            Iterations: <b>{{scenario.iterations_count}}</b> &nbsp;
            Failures: <b>{{scenario.errors.length}}</b>
          </p>

          <div ng-show="scenario.sla.length">
            <h2>Service-level agreement</h2>
            <table class="striped">
              <thead>
                <tr>
                  <th>Criterion
                  <th>Detail
                  <th>Success
                <tr>
              </thead>
              <tbody>
                <tr class="rich"
                    ng-repeat="row in scenario.sla track by $index"
                    ng-class="{'status-fail':!row.success, 'status-pass':row.success}">
                  <td>{{row.criterion}}
                  <td>{{row.detail}}
                  <td class="capitalize">{{row.success}}
                <tr>
              </tbody>
            </table>
          </div>

          <div widget="Table"
               data="scenario.table"
               lastrow-class="rich"
               title="Total durations">
          </div>

          <div widget="StackedArea"
               data="scenario.iterations.iter"
               name-x="Iteration sequence number"
               controls="true"
               guide="true">
          </div>

          <div widget="StackedArea"
               data="scenario.load_profile"
               title="Load Profile"
               title-class="h3"
               name-x="Timeline (seconds)"
               format-y="d"
               format-x=",.2f"
               class="lower">
          </div>

          <div widget="Pie"
               data="scenario.iterations.pie"
               title="Distribution"
               title-class="h3"
               style="float:left; width:40%; margin-top:15px">
          </div>

          <div widget="Histogram"
               ng-if="scenario.iterations.histogram.data.length"
               data="scenario.iterations.histogram.data[mainHistogram.id]"
               style="float:left; width:59%; margin-top:15px; position:relative; top:40px">
          </div>

          <select ng-model="mainHistogram"
                  ng-show="scenario.iterations.histogram.data.length"
                  ng-options="i.name for i in scenario.iterations.histogram.views track by i.id"
                  style="float:right; margin:45px 35px 0">
          </select>

          <div class="clearfix"></div>

        </script>

        <script type="text/ng-template" id="details">

          <div widget="StackedArea"
               data="scenario.atomic.iter"
               title="Atomic Action Durations"
               name-x="Iteration sequence number"
               controls="true"
               guide="true">
          </div>

          <div widget="Pie"
               data="scenario.atomic.pie"
               title="Distribution"
               title-class="h3"
               style="float:left; margin-top:15px"
               ng-style="compact_atomics() ? {width:'40%'} : {}">
          </div>

          <div widget="Histogram" data="scenario.atomic.histogram.data[atomicHistogram.id]"
               ng-if="scenario.atomic.histogram.data.length"
               style="float:left; position:relative; top:40px"
               ng-style="compact_atomics() ? {width:'59%', 'margin-top':'15px'} : {}">
          </div>

          <select ng-show="scenario.atomic.histogram.data.length"
                  ng-model="atomicHistogram"
                  ng-options="i.name for i in scenario.atomic.histogram.views track by i.id"
                  style="float:right; margin:45px 35px 0">
          </select>

          <div class="clearfix"></div>

        </script>

        <script type="text/ng-template" id="output">

          <div style="padding:10px 0 0">
            <span class="link"
                  ng-click="location.hash('output/additive')"
                  ng-class="{active:scenario.output.active === 'additive'}"
                  ng-if="scenario.output.has_additive">Aggregated</span>
            <span class="link"
                  ng-click="location.hash('output/complete')"
                  ng-class="{active:scenario.output.active === 'complete'}"
                  ng-if="scenario.output.has_complete">Per iteration</span>
          </div>

          <div ng-repeat="chart in scenario.additive_output"
               ng-if="scenario.output.active === 'additive'">
            <div widget="{{chart.widget}}"
                 title="{{chart.title}}"
                 description="{{chart.description}}"
                 name-x="{{chart.axis_label}}"
                 name-y="{{chart.label}}"
                 data="chart.data">
            </div>
          </div>

          <div ng-if="scenario.output.active === 'complete'" style="padding:10px 0 0">
            <select ng-model="outputIteration">
              <option ng-repeat="i in scenario.complete_output track by $index"
                      value="{{$index}}">
                Iteration {{$index}}
            </select>

            <div ng-repeat="chart in scenario.complete_output[outputIteration]">
              <div widget="{{chart.widget}}"
                   title="{{chart.title}}"
                   description="{{chart.description}}"
                   name-x="{{chart.axis_label}}"
                   name-y="{{chart.label}}"
                   data="chart.data">
              </div>
            </div>
          </div>
        </script>

        <script type="text/ng-template" id="hooks">

          <div style="padding:15px 0">
            <span ng-repeat="h in scenario.hooks track by $index"
                  class="buttn"
                  title="{{h.desc}}"
                  style="margin:0 10px 0 0"
                  ng-click="location.hash('hooks/'+$index)"
                  ng-class="{active:scenario.hook_idx===$index}">
              {{h.name}}
            </span>
          </div>

          <table class="striped" style="margin:5px 0 25px">
            <thead>
              <tr>
                <th>Plugin
                <th>Description
            </thead>
            <tbody>
              <tr>
                <td>{{scenario.hooks.cur.name}}
                <td>{{scenario.hooks.cur.desc}}
            </tbody>
          </table>

          <div>
            <span class="link"
                  ng-click="scenario.hooks.cur.active = 'additive'"
                  ng-class="{active:scenario.hooks.cur.active === 'additive'}"
                  ng-if="scenario.hooks.cur.additive.length">Aggregated</span>
            <span class="link"
                  ng-click="scenario.hooks.cur.active = 'complete'"
                  ng-class="{active:scenario.hooks.cur.active === 'complete'}"
                  ng-if="scenario.hooks.cur.complete.length">Per hook run</span>
          </div>

          <div ng-repeat="chart in scenario.hooks.cur.additive"
               ng-if="scenario.hooks.cur.active === 'additive'">
            <div widget="{{chart.widget}}"
                 title="{{chart.title}}"
                 description="{{chart.description}}"
                 name-x="{{chart.axis_label}}"
                 name-y="{{chart.label}}"
                 data="chart.data">
            </div>
          </div>

          <div ng-if="scenario.hooks.cur.active === 'complete'" style="padding:10px 0 0">

            <select ng-if="complete_hooks_as_dropdown()"
                    ng-model="scenario.hooks.cur.run_idx"
                    ng-change="set_hook_run()">
              <option ng-repeat="h in scenario.hooks.cur.complete track by $index"
                      ng-selected="scenario.hooks.cur.run_idx == $index"
                      value="{{$index}}">
                {{h.triggered_by}}
            </select>

            <div ng-if="! complete_hooks_as_dropdown()"
                 style="border:#ccc solid; border-width:1px 0 0; padding:5px 0 0">
              <span ng-repeat="h in scenario.hooks.cur.complete track by $index"
                    class="link"
                    ng-class="{active:scenario.hooks.cur.run_idx == $index}"
                    ng-click="set_hook_run($index)">
                {{h.triggered_by}}
              </span>
            </div>

            <table class="striped" style="margin:15px 0 15px">
              <thead>
                <tr>
                  <th>Status
                  <th>Triggered by
                  <th>Started at
                  <th>Finished at
              </thead>
              <tbody>
                <tr>
                  <td ng-style="scenario.hooks.cur.run.status === 'success' ? {color:'green'} : {color:'red'}">
                    <b>{{scenario.hooks.cur.run.status}}</b>
                  <td>{{scenario.hooks.cur.run.triggered_by}}
                  <td>{{scenario.hooks.cur.run.started_at}}
                  <td>{{scenario.hooks.cur.run.finished_at}}
              </tbody>
            </table>

            <div ng-repeat="chart in scenario.hooks.cur.run.charts">
              <div widget="{{chart.widget}}"
                   title="{{chart.title}}"
                   description="{{chart.description}}"
                   name-x="{{chart.axis_label}}"
                   name-y="{{chart.label}}"
                   data="chart.data">
              </div>
            </div>
          </div>
        </script>

        <script type="text/ng-template" id="failures">
          <h2>Task failures (<ng-pluralize
            count="scenario.errors.length"
            when="{'1': '1 iteration', 'other': '{} iterations'}"></ng-pluralize> failed)
          </h2>
          <table class="striped">
            <thead>
              <tr>
                <th>
                <th>Iteration
                <th>Exception type
                <th>Exception message
              </tr>
            </thead>
            <tbody>
              <tr class="expandable"
                  ng-repeat-start="i in scenario.errors track by $index"
                  ng-click="i.expanded = ! i.expanded">
                <td>
                  <span ng-hide="i.expanded">&#9658;</span>
                  <span ng-show="i.expanded">&#9660;</span>
                <td>{{i.iteration}}
                <td>{{i.type}}
                <td class="failure-mesg">{{i.message}}
              </tr>
              <tr ng-show="i.expanded" ng-repeat-end>
                <td colspan="4" class="failure-trace">{{i.traceback}}
              </tr>
            </tbody>
          </table>
        </script>

        <script type="text/ng-template" id="task">
          <h2>Subtask Configuration</h2>
          <pre class="code">{{scenario.config}}</pre>
        </script>
      </div>

    </div>
    <div class="clearfix"></div>


  </div>

  <script type="text/javascript">
    if (! window.angular) {(function(f){
      f(document.getElementById("content-nav"), "none");
      f(document.getElementById("content-main"), "none");
      f(document.getElementById("page-error"), "block").textContent = "Failed to load AngularJS framework"
    })(function(e, s){e.style.display = s; return e})}
</script>
</body>
</html>